!function(){"use strict";angular.module("mainApp",["ngRoute","main-app.service"]).constant("validExternalLink",["/b2b","/Account/LogOut","/Account/Login"]).config(["$routeProvider","$locationProvider","validExternalLink",function($routeProvider,$locationProvider,validExternalLink){$locationProvider.html5Mode({enabled:!0,requireBase:!0}),$routeProvider.when("/",{templateUrl:"/views/base.html"}),$routeProvider.when("/Home",{templateUrl:"/views/base.html"}),$routeProvider.when("/Home/Index",{templateUrl:"/views/base.html"}),$routeProvider.when("/Home/Contacts",{templateUrl:"/views/MainPageApp/Contacts.html"}),$routeProvider.when("/Home/Server",{templateUrl:"/views/MainPageApp/Servers.html"}),$routeProvider.when("/Home/Storage",{templateUrl:"/views/MainPageApp/Storage.html"}),$routeProvider.when("/Home/Certificates",{templateUrl:"/views/MainPageApp/Certificates.html"}),$routeProvider.when("/Home/Partners",{templateUrl:"/views/MainPageApp/Partners.html"}),$routeProvider.when("/Home/Vacancies",{templateUrl:"/views/MainPageApp/Vacancies.html"}),$routeProvider.when("/Account/Profile",{templateUrl:function(location){console.log(location);var search="";for(var index in location)search+=index+"="+location[index];return""===search?"/Account/Profile":"/Account/Profile?"+search},controller:"ProfileController",controllerAs:"Ctrl"}),$routeProvider.when("/Home/Error",{templateUrl:"/views/Shared/Error.html",controller:"ErrorController"}),$routeProvider.otherwise({redirectTo:function(routeParams,path,search){if(validExternalLink.indexOf(path)>-1){var srch="";for(var index in search)srch+=index+"="+search[index];return""===srch&&window.location.replace(path),window.location.replace(path+"?"+srch),path+"?"+srch}return"/Home/Error?Path="+path}})}]).run(["$rootScope","$location",function($rootScope,$location){$rootScope.$on("$routeChangeStart",function(event,next,current){})}])}(),function(){"use strict";function errorCtrl($scope,$routeParams){$scope.Path=$routeParams.Path}angular.module("mainApp").controller("ErrorController",errorCtrl),errorCtrl.$inject=["$scope","$routeParams"]}(),function(){"use strict";function menuController($scope,$location){function moveToUrlWithReturn(url){if($location.path()!==url){var currentUrl=$location.url();$location.path(url).search("ReturnUrl",currentUrl)}}var vm=this;vm.login=function(){moveToUrlWithReturn("/Account/Login")},vm.logOff=function(){moveToUrlWithReturn("/Account/LogOut")},vm.profile=function(){moveToUrlWithReturn("/Account/Profile")},vm.b2b=function(){$location.path("/b2b")}}angular.module("mainApp").controller("MenuController",menuController),menuController.$inject=["$scope","$location"]}(),function(){"use strict";function ProfileController($location,dataService){function activate(){}var vm=this;vm.data={},Object.defineProperty(vm,"access1C",{get:function(){return vm.data.Access1C?"B2B доступ разрешен":"B2B доступ ЗАПРЕЩЁН"}}),activate(),vm.debug=function(){console.log(vm)},vm.cancel=function(){return console.log(vm.returnUrl.length),vm.returnUrl&&vm.returnUrl.length>0?void $location.url(vm.returnUrl):void $location.url("/")},vm.save=function(){dataService.sendForm($location.path(),vm.data,vm.antiforgery).then(function(){console.log("Form sended")},function(){console.log("Form send Error")})}}angular.module("mainApp").controller("ProfileController",ProfileController),ProfileController.$inject=["$location","dataService"]}(),function(){"use strict";function controller($scope,$routeParams,products){$scope.title="homeCtrl",$scope.params=$routeParams,$scope.products=products.query(),$scope.products.$promise.then(function(result){})}angular.module("mainApp").controller("homeCtrl",controller),controller.$inject=["$scope","$routeParams","products"]}(),function(){"use strict";function dataService($http){function sendFormData(url,data,antiForgeryToken){if(""!==url&&!angular.isUndefined(url)){var req={method:"POST",url:url,headers:{"Content-Type":"application/json; charset=utf-8"}};return req.data=angular.toJson(data),angular.isDefined(antiForgeryToken)&&(req.headers.__RequestVerificationToken=antiForgeryToken),console.log(req),$http(req)}}var service={sendForm:sendFormData};return service}angular.module("mainApp").factory("dataService",dataService),dataService.$inject=["$http"]}(),function(){"use strict";function moduleMy($resource){return $resource("/api/Products")}angular.module("main-app.service",["ngResource"]).factory("products",moduleMy),moduleMy.$inject=["$resource"]}();